(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-categoryList-categoryList"],{"2a76":function(t,a,e){"use strict";var o=e("47fe"),n=e.n(o);n.a},"47fe":function(t,a,e){var o=e("9d8a");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=e("4f06").default;n("d5f73934",o,!0,{sourceMap:!1,shadowMode:!1})},5237:function(t,a,e){"use strict";e.r(a);var o=e("fd52"),n=e("8fb6");for(var i in n)"default"!==i&&function(t){e.d(a,t,(function(){return n[t]}))}(i);e("2a76");var r,d=e("f0c5"),l=Object(d["a"])(n["default"],o["b"],o["c"],!1,null,"6598395d",null,!1,o["a"],r);a["default"]=l.exports},"8fb6":function(t,a,e){"use strict";e.r(a);var o=e("c37e"),n=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(a,t,(function(){return o[t]}))}(i);a["default"]=n.a},"9d8a":function(t,a,e){var o=e("24fb");a=o(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/**\r\n * 布局\r\n * \r\n */uni-view[data-v-6598395d],\r\n.flex[data-v-6598395d]{display:-webkit-box;display:-webkit-flex;display:flex}.vs-flex-item[data-v-6598395d]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.vs-space-between[data-v-6598395d]{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.vs-space-around[data-v-6598395d]{-webkit-justify-content:space-around;justify-content:space-around}.vs-space-center[data-v-6598395d]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.vs-space-end[data-v-6598395d]{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.vs-row[data-v-6598395d]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.vs-column[data-v-6598395d]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.vs-align-end[data-v-6598395d]{-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.vs-align-center[data-v-6598395d]{-webkit-box-align:center;-webkit-align-items:center;align-items:center}.vs-item-hover[data-v-6598395d]{background-color:rgba(0,0,0,.05)}.vs-btn-hover[data-v-6598395d]{opacity:.8}\r\n/**\r\n * 基础背景颜色\r\n * \r\n */.bg-base[data-v-6598395d]{background-color:#0097fd}.bg-page[data-v-6598395d]{background-color:#f5f5f5}.bg-white[data-v-6598395d]{background-color:#fff}.bg-green1[data-v-6598395d]{background-color:#2cb98e}.bg-green2[data-v-6598395d]{background-color:#00d762}.text-left[data-v-6598395d]{text-align:left}.text-right[data-v-6598395d]{text-align:right}.text-center[data-v-6598395d]{text-align:center}\r\n/**\r\n * 基础文本颜色 \r\n * \r\n */.color-base[data-v-6598395d]{color:#ab6ff6}.color-white[data-v-6598395d]{color:#fff}.color-red[data-v-6598395d]{color:#e84a54}.color-black2[data-v-6598395d]{color:#222}.color-black3[data-v-6598395d]{color:#333}.color-black4[data-v-6598395d]{color:#444}.color-black6[data-v-6598395d]{color:#666}.color-black7[data-v-6598395d]{color:#777}.color-black8[data-v-6598395d]{color:#888}.color-black9[data-v-6598395d]{color:#999}.color-blue1[data-v-6598395d]{color:#226fd1}.color-blue2[data-v-6598395d]{color:#5ca3fc}.color-blue3[data-v-6598395d]{color:#4399fc}.font-20[data-v-6598395d]{font-style:normal;font-size:%?20?%;font-family:Droid Sans Fallback}.font-22[data-v-6598395d]{font-style:normal;font-size:%?22?%;font-family:Droid Sans Fallback}.font-24[data-v-6598395d]{font-style:normal;font-size:%?24?%;font-family:Droid Sans Fallback}.font-26[data-v-6598395d]{font-style:normal;font-size:%?26?%;font-family:Droid Sans Fallback}.font-28[data-v-6598395d]{font-style:normal;font-size:%?28?%;font-family:Droid Sans Fallback}.font-30[data-v-6598395d]{font-style:normal;font-size:%?30?%;font-family:Droid Sans Fallback}.font-32[data-v-6598395d]{font-style:normal;font-size:%?32?%;font-family:Droid Sans Fallback}.font-34[data-v-6598395d]{font-style:normal;font-size:%?34?%;font-family:Droid Sans Fallback}.font-36[data-v-6598395d]{font-style:normal;font-size:%?36?%;font-family:Droid Sans Fallback}.font-38[data-v-6598395d]{font-style:normal;font-size:%?38?%;font-family:Droid Sans Fallback}.font-40[data-v-6598395d]{font-style:normal;font-size:%?40?%;font-family:Droid Sans Fallback}.font-42[data-v-6598395d]{font-style:normal;font-size:%?42?%;font-family:Droid Sans Fallback}.font-44[data-v-6598395d]{font-style:normal;font-size:%?44?%;font-family:Droid Sans Fallback}.font-46[data-v-6598395d]{font-style:normal;font-size:%?46?%;font-family:Droid Sans Fallback}.font-48[data-v-6598395d]{font-style:normal;font-size:%?48?%;font-family:Droid Sans Fallback}.font-60[data-v-6598395d]{font-style:normal;font-size:%?60?%;font-family:Droid Sans Fallback}.font-w400[data-v-6598395d]{font-style:normal;font-weight:400}.font-w500[data-v-6598395d]{font-style:normal;font-weight:700;font-family:DroidSans-Bold}.font-w600[data-v-6598395d]{font-style:normal;font-weight:600;font-family:DroidSans-Bold}.font-w700[data-v-6598395d]{font-style:normal;font-weight:700;font-family:DroidSans-Bold}.line20[data-v-6598395d]{line-height:20}.line16[data-v-6598395d]{line-height:16}.vun-hairline[data-v-6598395d],\r\n.vun-hairline--bottom[data-v-6598395d],\r\n.vun-hairline--left[data-v-6598395d],\r\n.vun-hairline--right[data-v-6598395d],\r\n.vun-hairline--surround[data-v-6598395d],\r\n.vun-hairline--top[data-v-6598395d],\r\n.vun-hairline--top-bottom[data-v-6598395d]{position:relative;border-style:solid;border-color:#f5f5f5}.vun-hairline--top[data-v-6598395d]{border-top-width:%?1?%}.vun-hairline--left[data-v-6598395d]{border-left-width:%?1?%}.vun-hairline--right[data-v-6598395d]{border-right-width:%?1?%}.vun-hairline--bottom[data-v-6598395d]{border-bottom-width:%?1?%}.vun-hairline--top-bottom[data-v-6598395d]{border-top-width:%?1?%;border-bottom-width:%?1?%}.vun-hairline--surround[data-v-6598395d]{border-width:%?1?%}.margin-b5[data-v-6598395d]{margin-bottom:%?5?%}.margin-b10[data-v-6598395d]{margin-bottom:%?10?%}.margin-b15[data-v-6598395d]{margin-bottom:%?15?%}.margin-b20[data-v-6598395d]{margin-bottom:%?20?%}.margin-b25[data-v-6598395d]{margin-bottom:%?25?%}.margin-b30[data-v-6598395d]{margin-bottom:%?30?%}.margin-b35[data-v-6598395d]{margin-bottom:%?35?%}.margin-b40[data-v-6598395d]{margin-bottom:%?40?%}.margin-b50[data-v-6598395d]{margin-bottom:%?50?%}.margin-b60[data-v-6598395d]{margin-bottom:%?60?%}.margin-b70[data-v-6598395d]{margin-bottom:%?70?%}.margin-b80[data-v-6598395d]{margin-bottom:%?80?%}.whitespace-s[data-v-6598395d]{padding-left:%?15?%;padding-right:%?15?%}.whitespace[data-v-6598395d]{padding-left:%?30?%;padding-right:%?30?%}uni-page-body[data-v-6598395d]{background-color:#fff}.nav-bar[data-v-6598395d]{position:fixed;top:0;z-index:999;height:50px!important}.scroll-box[data-v-6598395d]{width:%?660?%}.nav-bar-btn[data-v-6598395d]{-webkit-box-shadow:-1px 2px 3px rgba(0,0,0,.3);box-shadow:-1px 2px 3px rgba(0,0,0,.3)}.category-box[data-v-6598395d]{width:%?750?%;height:60vh}.category-head[data-v-6598395d]{-webkit-box-flex:3;-webkit-flex:3;flex:3}.category-body[data-v-6598395d]{-webkit-box-flex:6;-webkit-flex:6;flex:6}.tag-text[data-v-6598395d]{line-height:1.5;padding:0 5px;color:#999}.tag-text.cur[data-v-6598395d]{background-color:#2395ff;border-color:#2395ff;color:#fff}body.?%PAGE?%[data-v-6598395d]{background-color:#fff}',""]),t.exports=a},c37e:function(t,a,e){"use strict";(function(t){var o=e("4ea4");e("99af"),e("4de4"),e("caad"),e("2532"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=o(e("2909")),i=o(e("5530")),r=e("2f62"),d=o(e("ce98")),l={name:"categoryList",data:function(){return{navBarInfo:{},TabCur:0,foodType:[],categoryCur:0,categorySelected:[0,0],categoryData:[],categotyID:null,pageState:{login:!1,navBtnSelected:!1},popupStack:[],elementInfo:{},style:{},pageScroll:0,storeListData:[],storeListDataLoading:!0,hasNext:!1}},components:{storeList:d.default},computed:(0,i.default)({},(0,r.mapState)(["login"])),watch:{pageState:function(t,a){t.navBtnSelected!==a.navBtnSelected&&(t.navBtnSelected?this.openPopup("filterCategoryPopup"):this.closePopup("filterCategoryPopup"))}},onPageScroll:function(t){this.pageScroll=t.scrollTop},onReachBottom:function(){this.getMore()},created:function(){var a=this;try{var e=uni.getStorageSync("category_data");e&&(this.categoryData=JSON.parse(e))}catch(o){t.log("获取缓存失败")}this.categoryData&&this.categoryData.length?(this.categoryData=this.categoryData.filter((function(t){return 0!==t.sub_categories.length})),this.foodType=this.categoryData[0]):this.$http.get.categore_data().then((function(e){a.categoryData=e,uni.setStorage({key:"category_data",data:JSON.stringify(e),success:function(){t.log("存储category_data成功")}}),a.categoryData=a.categoryData.filter((function(t){return 0!==t.sub_categories.length})),a.foodType=a.categoryData[0]}),(function(a){t.log("请求失败",a)})),this.login?this.$http.get.store_list_data_1().then((function(t){a.storeListData=t.items,a.hasNext=t.has_next,a.storeListDataLoading=!1}),(function(e){t.log(e),a.storeListDataLoading=!1})):this.storeListDataLoading=!1},mounted:function(){},methods:{getMore:function(){var a=this;if(this.hasNext){if(this.storeListData.length>8)return void this.$http.get.store_list_data_3().then((function(t){a.storeListData=[].concat((0,n.default)(a.storeListData),(0,n.default)(t.items)),a.hasNext=t.has_next}),(function(e){t.log(e),a.hasNext=!1}));this.$http.get.store_list_data_2().then((function(t){a.storeListData=[].concat((0,n.default)(a.storeListData),(0,n.default)(t.items)),a.hasNext=t.has_next}),(function(e){t.log(e),a.hasNext=!1}))}},categoryHeadtabSelect:function(a){t.log(a.currentTarget.dataset.id),this.categoryCur=a.currentTarget.dataset.id},categoryBodytabSelect:function(t){this.categorySelected[0]=this.categoryCur,this.categorySelected[1]=t.currentTarget.dataset.id,this.foodType=this.categoryData[this.categorySelected[0]],this.TabCur=this.categorySelected[1],this.categotyID="cu-item"+this.TabCur,this.changePageState({navBtnSelected:!1})},navBtnTap:function(){this.changePageState({navBtnSelected:!0})},typeSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.categotyID="cu-item"+this.TabCur},changePageState:function(t){this.$utils.log("changePageState","改变页面状态",t),this.pageState=Object.assign({},this.pageState,t)},popupChange:function(t){this.$utils.log("popupChange","弹窗状态改变==>"+(t.show?"开":"关"),t),0==t.show&&(this.popupStack.pop(),this.pageState.storeNavSelected&&(this.pageState.storeNavSelected=!1),this.pageState.navBtnSelected&&(this.pageState.navBtnSelected=!1))},openPopup:function(t){this.$utils.log("openPopup","打开弹窗"+t),this.popupStack.includes(t)||(this.popupStack.push(t),this.$refs[t].open())},closePopup:function(t){this.$utils.log("closePopup","关闭弹窗"+t),this.$refs[t].close()}}};a.default=l}).call(this,e("5a52")["default"])},fd52:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){return o}));var o={storeList:e("ce98").default,uniPopup:e("fc61").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"category-container flex-direction",style:{paddingTop:"50px"}},[e("v-uni-view",{staticClass:"cu-bar flex-direction mbg-gradual-blue align-stretch nav-bar",style:{zIndex:t.pageState.navBtnSelected?0:999}},[e("v-uni-view",{staticClass:"flex-sub"},[e("v-uni-scroll-view",{staticClass:"nav scroll-box",attrs:{"scroll-x":!0,"scroll-with-animation":!0,"scroll-into-view":t.categotyID}},t._l(t.foodType.sub_categories,(function(a,o){return e("v-uni-view",{key:o,staticClass:"cu-item",class:[o==t.TabCur?"text-white cur":"text-color-e"],attrs:{"data-id":o,id:"cu-item"+o},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.typeSelect.apply(void 0,arguments)}}},[t._v(t._s(a.name))])})),1),e("v-uni-view",{staticClass:"padding nav-bar-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navBtnTap.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"lg text-white cuIcon-unfold"})],1)],1)],1),e("store-list",{attrs:{top:50,nativeNav:!1,nativeTabbar:!1,storeListData:t.storeListData,hasNext:t.hasNext,pageScroll:t.pageScroll,loading:t.storeListDataLoading}}),e("uni-popup",{ref:"filterCategoryPopup",staticClass:"filter-bar-popup-box",attrs:{type:"top",animation:!0},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.popupChange.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"category-box flex-direction"},[e("v-uni-view",{staticClass:"title-box bg-grey-fa justify-between"},[e("v-uni-text",{staticClass:"padding"},[t._v("请选择分类")]),e("v-uni-text",{staticClass:"cuIcon-close text-xl padding",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.changePageState({navBtnSelected:!1})}}})],1),e("v-uni-view",{staticClass:"category-box flex-sub"},[e("v-uni-scroll-view",{staticClass:"bg-white nav flex-direction category-head bg-grey-fc",attrs:{"scroll-y":!0}},t._l(t.categoryData,(function(a,o){return e("v-uni-view",{key:o,staticClass:"cu-item justify-between padding-lr-sm align-center",class:o==t.categoryCur?"cur-left text-color-blue bg-white":" bg-grey-fc",style:{display:"flex"},attrs:{"data-id":o},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.categoryHeadtabSelect.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"text-color-6"},[t._v(t._s(a.name))]),e("v-uni-text",{staticClass:"round text-xs border border-color-e padding-0 tag-text"},[t._v(t._s(a.count))])],1)})),1),e("v-uni-scroll-view",{staticClass:"bg-white nav flex-direction category-body",attrs:{"scroll-y":!0}},t._l(t.categoryData[t.categoryCur].sub_categories,(function(a,o){return e("v-uni-view",{key:o,staticClass:"cu-item justify-between padding-lr-sm align-center",class:o==t.categorySelected[1]&&t.categoryCur==t.categorySelected[0]?"text-color-blue":"",style:{display:"flex"},attrs:{"data-id":o},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.categoryBodytabSelect.apply(void 0,arguments)}}},[e("v-uni-view",{},[e("v-uni-text",[t._v(t._s(a.name))])],1),e("v-uni-text",{staticClass:"round text-xs border border-color-e padding-0 tag-text",class:o==t.categorySelected[1]&&t.categoryCur==t.categorySelected[0]?"cur":""},[t._v(t._s(a.count))])],1)})),1)],1)],1)],1)],1)},i=[]}}]);