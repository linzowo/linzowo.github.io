(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{6415:function(t,a,e){"use strict";e.r(a);var n=e("9aeb"),i=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},"777e":function(t,a,e){var n=e("a84e");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("0982d723",n,!0,{sourceMap:!1,shadowMode:!1})},"96bd":function(t,a,e){"use strict";var n=e("777e"),i=e.n(n);i.a},"9aeb":function(t,a,e){"use strict";(function(t){var n=e("4ea4");e("caad"),e("2532"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("5530")),o=e("2f62"),r=n(e("ce98")),s={data:function(){return{hotData:[],inputText:"",searchCueData:{},searchHistory:[],searchRes:[],searchResLoading:!0,hasNext:!1,recommendData:[]}},components:{storeList:r.default},watch:{inputText:function(t,a){t?(this.searchCueData={},this.DB_getSearchCue()):(this.searchCueData={},this.searchRes=[],this.recommendData=[]),t!==a&&(this.searchRes=[],this.recommendData=[])}},computed:(0,i.default)({},(0,o.mapState)(["login"])),created:function(){var a=this;this.login||uni.redirectTo({url:"/pages/login/login"}),this.DB_getSearchCue=this._.debounce(this.getSearchCue,1e3);try{var e=uni.getStorageSync("SEARCH_HISTORY");e&&(this.searchHistory=e)}catch(n){t.log(n)}this.$http.get.hot_search().then((function(t){a.hotData=t,a.searchResLoading=!1}),(function(e){t.log(e),a.searchResLoading=!1}))},onReachBottom:function(){},methods:{fillSearch:function(t){this.inputText=t,this.requestSearchRes()},clearSearchHistory:function(){this.searchHistory=[],uni.setStorage({key:"SEARCH_HISTORY",data:this.searchHistory,success:function(){t.log("清空搜索历史成功")}})},requestSearchRes:function(a){var e=this;this.$utils.log("requestSearchRes","请求搜索结果"),this.searchHistory.includes(this.inputText)||(this.searchHistory.push(this.inputText),uni.setStorage({key:"SEARCH_HISTORY",data:this.searchHistory,success:function(){t.log("存储搜索历史成功")}})),this.searchCueData={},this.searchCueData.word_with_meta=!0,uni.showLoading({title:""}),"没有结果"==this.inputText?(this.searchRes=[],this.$http.get.search_res_1().then((function(t){e.recommendData=t.inside[1].restaurant_with_foods,uni.hideLoading()}),(function(a){t.log(a)}))):this.$http.get.search_res_1().then((function(t){e.searchRes=t.inside[0].restaurant_with_foods,e.recommendData=t.inside[1].restaurant_with_foods,uni.hideLoading()}),(function(a){t.log(a)}))},getSearchCue:function(){var a=this;this.$utils.log("getSearchCue","获取搜索提示"),this.searchCueData={},this.$http.get.search_cue().then((function(t){a.searchCueData=t}),(function(a){t.log(a)}))},clearSearch:function(){this.inputText=""},goback:function(){getCurrentPages().length<=1?uni.switchTab({url:"/pages/index/index",fail:function(a){t.log(a)}}):uni.navigateBack({delta:1})}}};a.default=s}).call(this,e("5a52")["default"])},a84e:function(t,a,e){var n=e("24fb");a=n(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/**\r\n * 布局\r\n * \r\n */uni-view[data-v-355f4b89],\r\n.flex[data-v-355f4b89]{display:-webkit-box;display:-webkit-flex;display:flex}.vs-flex-item[data-v-355f4b89]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.vs-space-between[data-v-355f4b89]{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.vs-space-around[data-v-355f4b89]{-webkit-justify-content:space-around;justify-content:space-around}.vs-space-center[data-v-355f4b89]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.vs-space-end[data-v-355f4b89]{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.vs-row[data-v-355f4b89]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.vs-column[data-v-355f4b89]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.vs-align-end[data-v-355f4b89]{-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.vs-align-center[data-v-355f4b89]{-webkit-box-align:center;-webkit-align-items:center;align-items:center}.vs-item-hover[data-v-355f4b89]{background-color:rgba(0,0,0,.05)}.vs-btn-hover[data-v-355f4b89]{opacity:.8}\r\n/**\r\n * 基础背景颜色\r\n * \r\n */.bg-base[data-v-355f4b89]{background-color:#0097fd}.bg-page[data-v-355f4b89]{background-color:#f5f5f5}.bg-white[data-v-355f4b89]{background-color:#fff}.bg-green1[data-v-355f4b89]{background-color:#2cb98e}.bg-green2[data-v-355f4b89]{background-color:#00d762}.text-left[data-v-355f4b89]{text-align:left}.text-right[data-v-355f4b89]{text-align:right}.text-center[data-v-355f4b89]{text-align:center}\r\n/**\r\n * 基础文本颜色 \r\n * \r\n */.color-base[data-v-355f4b89]{color:#ab6ff6}.color-white[data-v-355f4b89]{color:#fff}.color-red[data-v-355f4b89]{color:#e84a54}.color-black2[data-v-355f4b89]{color:#222}.color-black3[data-v-355f4b89]{color:#333}.color-black4[data-v-355f4b89]{color:#444}.color-black6[data-v-355f4b89]{color:#666}.color-black7[data-v-355f4b89]{color:#777}.color-black8[data-v-355f4b89]{color:#888}.color-black9[data-v-355f4b89]{color:#999}.color-blue1[data-v-355f4b89]{color:#226fd1}.color-blue2[data-v-355f4b89]{color:#5ca3fc}.color-blue3[data-v-355f4b89]{color:#4399fc}.font-20[data-v-355f4b89]{font-style:normal;font-size:%?20?%;font-family:Droid Sans Fallback}.font-22[data-v-355f4b89]{font-style:normal;font-size:%?22?%;font-family:Droid Sans Fallback}.font-24[data-v-355f4b89]{font-style:normal;font-size:%?24?%;font-family:Droid Sans Fallback}.font-26[data-v-355f4b89]{font-style:normal;font-size:%?26?%;font-family:Droid Sans Fallback}.font-28[data-v-355f4b89]{font-style:normal;font-size:%?28?%;font-family:Droid Sans Fallback}.font-30[data-v-355f4b89]{font-style:normal;font-size:%?30?%;font-family:Droid Sans Fallback}.font-32[data-v-355f4b89]{font-style:normal;font-size:%?32?%;font-family:Droid Sans Fallback}.font-34[data-v-355f4b89]{font-style:normal;font-size:%?34?%;font-family:Droid Sans Fallback}.font-36[data-v-355f4b89]{font-style:normal;font-size:%?36?%;font-family:Droid Sans Fallback}.font-38[data-v-355f4b89]{font-style:normal;font-size:%?38?%;font-family:Droid Sans Fallback}.font-40[data-v-355f4b89]{font-style:normal;font-size:%?40?%;font-family:Droid Sans Fallback}.font-42[data-v-355f4b89]{font-style:normal;font-size:%?42?%;font-family:Droid Sans Fallback}.font-44[data-v-355f4b89]{font-style:normal;font-size:%?44?%;font-family:Droid Sans Fallback}.font-46[data-v-355f4b89]{font-style:normal;font-size:%?46?%;font-family:Droid Sans Fallback}.font-48[data-v-355f4b89]{font-style:normal;font-size:%?48?%;font-family:Droid Sans Fallback}.font-60[data-v-355f4b89]{font-style:normal;font-size:%?60?%;font-family:Droid Sans Fallback}.font-w400[data-v-355f4b89]{font-style:normal;font-weight:400}.font-w500[data-v-355f4b89]{font-style:normal;font-weight:700;font-family:DroidSans-Bold}.font-w600[data-v-355f4b89]{font-style:normal;font-weight:600;font-family:DroidSans-Bold}.font-w700[data-v-355f4b89]{font-style:normal;font-weight:700;font-family:DroidSans-Bold}.line20[data-v-355f4b89]{line-height:20}.line16[data-v-355f4b89]{line-height:16}.vun-hairline[data-v-355f4b89],\r\n.vun-hairline--bottom[data-v-355f4b89],\r\n.vun-hairline--left[data-v-355f4b89],\r\n.vun-hairline--right[data-v-355f4b89],\r\n.vun-hairline--surround[data-v-355f4b89],\r\n.vun-hairline--top[data-v-355f4b89],\r\n.vun-hairline--top-bottom[data-v-355f4b89]{position:relative;border-style:solid;border-color:#f5f5f5}.vun-hairline--top[data-v-355f4b89]{border-top-width:%?1?%}.vun-hairline--left[data-v-355f4b89]{border-left-width:%?1?%}.vun-hairline--right[data-v-355f4b89]{border-right-width:%?1?%}.vun-hairline--bottom[data-v-355f4b89]{border-bottom-width:%?1?%}.vun-hairline--top-bottom[data-v-355f4b89]{border-top-width:%?1?%;border-bottom-width:%?1?%}.vun-hairline--surround[data-v-355f4b89]{border-width:%?1?%}.margin-b5[data-v-355f4b89]{margin-bottom:%?5?%}.margin-b10[data-v-355f4b89]{margin-bottom:%?10?%}.margin-b15[data-v-355f4b89]{margin-bottom:%?15?%}.margin-b20[data-v-355f4b89]{margin-bottom:%?20?%}.margin-b25[data-v-355f4b89]{margin-bottom:%?25?%}.margin-b30[data-v-355f4b89]{margin-bottom:%?30?%}.margin-b35[data-v-355f4b89]{margin-bottom:%?35?%}.margin-b40[data-v-355f4b89]{margin-bottom:%?40?%}.margin-b50[data-v-355f4b89]{margin-bottom:%?50?%}.margin-b60[data-v-355f4b89]{margin-bottom:%?60?%}.margin-b70[data-v-355f4b89]{margin-bottom:%?70?%}.margin-b80[data-v-355f4b89]{margin-bottom:%?80?%}.whitespace-s[data-v-355f4b89]{padding-left:%?15?%;padding-right:%?15?%}.whitespace[data-v-355f4b89]{padding-left:%?30?%;padding-right:%?30?%}uni-page-body[data-v-355f4b89]{background-color:#fff}.header[data-v-355f4b89]{position:fixed;top:0;background-color:#fff;z-index:99;width:%?750?%;height:100px}.content[data-v-355f4b89]{margin-top:100px}.cu-bar[data-v-355f4b89], .search-form[data-v-355f4b89], .search .action uni-button[data-v-355f4b89]{max-height:50px}@media screen and (min-width:760px){.cu-bar[data-v-355f4b89]{min-height:0}}.search-nav[data-v-355f4b89]{height:50px}.search-cue-cover[data-v-355f4b89]{width:%?48?%;height:%?48?%}.reservation[data-v-355f4b89]{color:#00e066;border-color:#00e066;margin-left:%?-40?%}.search-result-box[data-v-355f4b89]{width:%?750?%}body.?%PAGE?%[data-v-355f4b89]{background-color:#fff}',""]),t.exports=a},b5c7:function(t,a,e){"use strict";e.r(a);var n=e("e5fe"),i=e("6415");for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("96bd");var r,s=e("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"355f4b89",null,!1,n["a"],r);a["default"]=c.exports},e5fe:function(t,a,e){"use strict";var n;e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return n}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"search-container flex-direction"},[e("v-uni-view",{staticClass:"header flex-direction"},[e("v-uni-view",{staticClass:"search-nav padding-lr-xs align-center"},[e("v-uni-text",{staticClass:"lg text-gray cuIcon-back",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goback.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"cu-bar search bg-white"},[e("v-uni-view",{staticClass:"search-form round"},[e("v-uni-text",{staticClass:"cuIcon-search"}),e("v-uni-input",{attrs:{"adjust-position":!1,type:"text",placeholder:"输入商家、商品名称(输入'没有结果'查看搜索无结果情况)","confirm-type":"search"},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.requestSearchRes.apply(void 0,arguments)}},model:{value:t.inputText,callback:function(a){t.inputText=a},expression:"inputText"}}),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.inputText,expression:"inputText"}],staticClass:"padding-xs",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clearSearch.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"lg text-gray cuIcon-close text-bold text-lg"})],1)],1),e("v-uni-view",{staticClass:"action"},[e("v-uni-button",{staticClass:"cu-btn bg-green shadow-blur round",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.requestSearchRes.apply(void 0,arguments)}}},[t._v("搜索")])],1)],1)],1),e("v-uni-view",{staticClass:"content flex-sub"},[e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.inputText,expression:"!inputText"}],staticClass:"search-tag-box flex-direction"},[t.searchHistory.length?e("v-uni-view",{staticClass:"history-search flex-direction margin-bottom"},[e("v-uni-view",{staticClass:"title padding-tb padding-lr-sm justify-between align-center"},[e("v-uni-text",{staticClass:"text-color-6 text-lg text-bold"},[t._v("历史搜索")]),e("v-uni-view",{staticClass:"padding-lr-xs",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clearSearchHistory.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"lg text-color-c cuIcon-deletefill"})],1)],1),e("v-uni-view",{staticClass:"search-tag-list flex-wrap"},t._l(t.searchHistory,(function(a,n){return e("v-uni-view",{key:n,staticClass:"search-tag-item padding-tb-xs radius padding-lr-sm bg-grey-f7 margin-xs",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.fillSearch(a)}}},[e("v-uni-text",[t._v(t._s(a))])],1)})),1)],1):t._e(),e("v-uni-view",{staticClass:"hot-search flex-direction"},[e("v-uni-view",{staticClass:"title padding-tb padding-lr-sm"},[e("v-uni-text",{staticClass:"text-color-6 text-lg text-bold"},[t._v("热门搜索")])],1),e("v-uni-view",{staticClass:"search-tag-list flex-wrap"},t._l(t.hotData,(function(a,n){return e("v-uni-view",{key:n,staticClass:"search-tag-item padding-tb-sm radius padding-lr-sm bg-grey-f7 margin-xs",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.fillSearch(a.word)}}},[e("v-uni-text",[t._v(t._s(a.word))])],1)})),1)],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.inputText&&!t.searchRes.length&&!t.recommendData.length,expression:"inputText && (!searchRes.length && !recommendData.length)"}],staticClass:"search-cue-box flex-sub padding-lr flex-direction"},[t.searchCueData.word_with_meta?t._e():e("v-uni-view",{staticClass:"search-cue-item flex-sub flex-direction"},[e("v-uni-view",{staticClass:"align-center flex-sub normal"},[e("v-uni-text",{staticClass:"cuIcon-search padding-sm"}),e("v-uni-view",{staticClass:"padding-tb border-bottom border-color-e flex-sub"},[e("v-uni-text",[t._v("查找 "+t._s(t.inputText))])],1)],1)],1),t._l(t.searchCueData.restaurants,(function(a,n){return e("v-uni-view",{key:n,staticClass:"search-cue-item flex-sub flex-direction",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.fillSearch(a.name)}}},[e("v-uni-view",{staticClass:"align-center flex-sub special"},[e("v-uni-view",{staticClass:"cover margin-right"},[e("v-uni-image",{staticClass:"search-cue-cover",attrs:{src:t._f("imgUrlFilter")(a.image_path),mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"align-center justify-between flex-sub border-bottom border-color-e padding-top-sm padding-bottom-xs"},[e("v-uni-view",{staticClass:"search-cue-content flex-direction flex-sub"},[e("v-uni-view",{staticClass:"title padding-tb-xs flex-sub"},[e("v-uni-view",{staticClass:"basis-xl text-cut"},[e("v-uni-text",{staticClass:"text-cut"},[t._v(t._s(a.name))])],1),e("v-uni-view",{staticClass:"basis-sm"},t._l(a.tags,(function(a,n){return e("v-uni-text",{key:n,staticClass:"text-scale-8 text-sm padding-lr-xs",style:{color:"#fff",backgroundColor:"#"+a.name_color,height:"35rpx"}},[t._v(t._s(a.name))])})),1)],1),e("v-uni-view",{},[e("v-uni-text",{staticClass:"reservation text-xs round border justify-center text-scale-8 padding-lr-xs"},[t._v("接受预定，"+t._s(a.next_business_time)+"开始配送")])],1)],1),e("v-uni-view",{staticClass:"rating margin-left-sm text-xs text-color-9"},[e("v-uni-text",[t._v("评价"+t._s(a.rating))])],1)],1)],1)],1)})),t._l(t.searchCueData.word_with_meta,(function(a){return e("v-uni-view",{key:a.word,staticClass:"search-cue-item flex-sub flex-direction",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.fillSearch(a.word)}}},[e("v-uni-view",{staticClass:"align-center flex-sub normal"},[e("v-uni-text",{staticClass:"cuIcon-search padding-sm"}),e("v-uni-view",{staticClass:"padding-tb border-bottom border-color-e flex-sub"},[e("v-uni-text",[t._v(t._s(a.word))])],1)],1)],1)}))],2),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.searchRes.length||t.recommendData.length,expression:"searchRes.length || recommendData.length"}],staticClass:"search-result-box flex-sub"},[e("storeList",{attrs:{top:100,nativeNav:!1,nativeTabbar:!1,storeListData:t.searchRes,loading:t.searchResLoading,recommendData:t.recommendData,hasNext:t.hasNext,mode:"search"}})],1)],1)],1)},o=[]}}]);